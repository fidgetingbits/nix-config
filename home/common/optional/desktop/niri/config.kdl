//order matters
include "inputs.kdl"
include "outputs.kdl"
include "binds.kdl"
include "rules.kdl"

//
// ========== Named Workspaces ==========
//
workspace "1_dev" {
    open-on-output "eDP-1"
}
workspace "2_web" {
    open-on-output "eDP-1"
}
// Scratch
workspace "Y_qrs" {
    open-on-output "eDP-1"
}

//
// ========== Animations ==========
//
animations {
    //FIXME(niri): go through available options
	// Whether to disable animations.
	//off

	// Slow down or speed up animations by this factor. Values below 1 speed animations up.
	slowdown 0.7
}

//
// ========== Overview screen ==========
//
overview {
    //FIXME(niri): go through available options
	// Color of the backdrop.
	// backdrop-color "#17171a"

	// Configuration of shadows around workspaces in the overview.
	workspace-shadow {
		softness 40
		spread 20
		offset x=0 y=0
		color "#00000088"
	}
}

//
// ========== Startup ==========
//
// FIXME: Confirm if dbus-update-activation-environment is needed
spawn-at-startup "uwsm finalize NIRI_SOCKET"
spawn-at-startup "dbus-update-activation-environment --all --systemd"

hotkey-overlay { skip-at-startup; }

//
// ========== Miscellaneous ==========
//

screenshot-path null
//screenshot-path "~/downloads/screenshots/screenshot from %Y-%m-%d %H-%M-%S.png"

// Disable client-side decorations
// FIXME(niri): test this on or off
prefer-no-csd

switch-events {
    lid-close { spawn "notify-send" "The laptop lid is closed."; }
    lid-open { spawn "notify-send" "The laptop lid is open."; }
}

// FIXME: These shouldn't be needed becuase of uwsm?
// environment {
// 	// Set the current desktop name.
// 	XDG_CURRENT_DESKTOP "niri"
// 	GDK_BACKEND "wayland"
// 	QT_QPA_PLATFORM "wayland"
//
// 	// Qt: Enable automatic scaling based on the monitor's pixel density.
// 	QT_AUTO_SCREEN_SCALE_FACTOR "1"
//
// 	// Qt: Disable window decorations on QT applications.
// 	QT_WAYLAND_DISABLE_WINDOWDECORATION "1"
//
// 	// Run SDL2 applications on Wayland.
// 	SDL_VIDEODRIVER "wayland"
//
// 	// Force Clutter applications to use the Wayland backend.
// 	CLUTTER_BACKEND "wayland"
// }
